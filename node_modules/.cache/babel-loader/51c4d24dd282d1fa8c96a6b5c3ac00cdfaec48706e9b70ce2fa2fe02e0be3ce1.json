{"ast":null,"code":"var _jsxFileName = \"D:\\\\GUSTAVO\\\\minimap\\\\src\\\\components\\\\Effects.js\",\n  _s = $RefreshSig$();\nimport * as THREE from \"three\";\nimport React, { useEffect, useRef, useMemo, useState } from \"react\";\nimport { extend, useFrame, useThree, createPortal } from \"@react-three/fiber\";\nimport { EffectComposer, ShaderPass, RenderPass, UnrealBloomPass, FilmPass } from \"three-stdlib\";\nimport { WaterPass } from \"./WaterPass\";\nimport { EffectPass } from \"./EffectPass\";\nimport state from \"../store\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nextend({\n  EffectComposer,\n  ShaderPass,\n  RenderPass,\n  WaterPass,\n  UnrealBloomPass,\n  FilmPass,\n  EffectPass\n});\nexport default function Effects(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [scene] = useState(() => new THREE.Scene());\n  const composer = useRef();\n  const effect = useRef();\n  const water = useRef();\n  const bloom = useRef();\n  const {\n    gl,\n    size,\n    camera\n  } = useThree();\n  let last = state.top.current;\n  useEffect(() => void composer.current.setSize(size.width, size.height), [size]);\n  useFrame(() => {\n    const {\n      top\n    } = state;\n    effect.current.factor = THREE.MathUtils.lerp(effect.current.factor, (top.current - last) / -30, 0.1);\n    bloom.current.strength = THREE.MathUtils.lerp(bloom.current.strength, Math.abs((top.current - last) / 200), 0.1);\n    water.current.factor = THREE.MathUtils.lerp(water.current.factor, Math.abs((top.current - last) / 30), 0.1);\n    last = top.current;\n    gl.autoClear = true;\n    composer.current.render();\n  }, 1);\n  return createPortal( /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"effectComposer\", {\n      ref: composer,\n      args: [gl],\n      children: [/*#__PURE__*/_jsxDEV(\"renderPass\", {\n        attachArray: \"passes\",\n        scene: scene,\n        camera: camera\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"unrealBloomPass\", {\n        attachArray: \"passes\",\n        ref: bloom,\n        args: [undefined, 0.0, 1, 0.0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"effectPass\", {\n        attachArray: \"passes\",\n        ref: effect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"waterPass\", {\n        attachArray: \"passes\",\n        ref: water\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), children]\n  }, void 0, true), scene);\n}\n_s(Effects, \"shL9qGbxU0TSPl42d23zirrHo1o=\", false, function () {\n  return [useThree, useFrame];\n});\n_c = Effects;\nvar _c;\n$RefreshReg$(_c, \"Effects\");","map":{"version":3,"names":["THREE","React","useEffect","useRef","useMemo","useState","extend","useFrame","useThree","createPortal","EffectComposer","ShaderPass","RenderPass","UnrealBloomPass","FilmPass","WaterPass","EffectPass","state","jsxDEV","_jsxDEV","Fragment","_Fragment","Effects","_ref","_s","children","scene","Scene","composer","effect","water","bloom","gl","size","camera","last","top","current","setSize","width","height","factor","MathUtils","lerp","strength","Math","abs","autoClear","render","ref","args","attachArray","fileName","_jsxFileName","lineNumber","columnNumber","undefined","_c","$RefreshReg$"],"sources":["D:/GUSTAVO/minimap/src/components/Effects.js"],"sourcesContent":["import * as THREE from \"three\"\nimport React, { useEffect, useRef, useMemo, useState } from \"react\"\nimport { extend, useFrame, useThree, createPortal } from \"@react-three/fiber\"\nimport { EffectComposer, ShaderPass, RenderPass, UnrealBloomPass, FilmPass } from \"three-stdlib\"\nimport { WaterPass } from \"./WaterPass\"\nimport { EffectPass } from \"./EffectPass\"\nimport state from \"../store\"\n\nextend({ EffectComposer, ShaderPass, RenderPass, WaterPass, UnrealBloomPass, FilmPass, EffectPass })\n\nexport default function Effects({ children }) {\n  const [scene] = useState(() => new THREE.Scene())\n  const composer = useRef()\n  const effect = useRef()\n  const water = useRef()\n  const bloom = useRef()\n  const { gl, size, camera } = useThree()\n  let last = state.top.current\n  useEffect(() => void composer.current.setSize(size.width, size.height), [size])\n  useFrame(() => {\n    const { top } = state\n    effect.current.factor = THREE.MathUtils.lerp(effect.current.factor, (top.current - last) / -30, 0.1)\n    bloom.current.strength = THREE.MathUtils.lerp(bloom.current.strength, Math.abs((top.current - last) / 200), 0.1)\n    water.current.factor = THREE.MathUtils.lerp(water.current.factor, Math.abs((top.current - last) / 30), 0.1)\n    last = top.current\n    gl.autoClear = true\n    composer.current.render()\n  }, 1)\n  return createPortal(\n    <>\n      <effectComposer ref={composer} args={[gl]}>\n        <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\n        <unrealBloomPass attachArray=\"passes\" ref={bloom} args={[undefined, 0.0, 1, 0.0]} />\n        <effectPass attachArray=\"passes\" ref={effect} />\n        <waterPass attachArray=\"passes\" ref={water} />\n      </effectComposer>\n      {children}\n    </>,\n    scene\n  )\n}\n"],"mappings":";;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,OAAOC,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AACnE,SAASC,MAAM,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,YAAY,QAAQ,oBAAoB;AAC7E,SAASC,cAAc,EAAEC,UAAU,EAAEC,UAAU,EAAEC,eAAe,EAAEC,QAAQ,QAAQ,cAAc;AAChG,SAASC,SAAS,QAAQ,aAAa;AACvC,SAASC,UAAU,QAAQ,cAAc;AACzC,OAAOC,KAAK,MAAM,UAAU;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE5Bf,MAAM,CAAC;EAAEI,cAAc;EAAEC,UAAU;EAAEC,UAAU;EAAEG,SAAS;EAAEF,eAAe;EAAEC,QAAQ;EAAEE;AAAW,CAAC,CAAC;AAEpG,eAAe,SAASM,OAAOA,CAAAC,IAAA,EAAe;EAAAC,EAAA;EAAA,IAAd;IAAEC;EAAS,CAAC,GAAAF,IAAA;EAC1C,MAAM,CAACG,KAAK,CAAC,GAAGrB,QAAQ,CAAC,MAAM,IAAIL,KAAK,CAAC2B,KAAK,CAAC,CAAC,CAAC;EACjD,MAAMC,QAAQ,GAAGzB,MAAM,CAAC,CAAC;EACzB,MAAM0B,MAAM,GAAG1B,MAAM,CAAC,CAAC;EACvB,MAAM2B,KAAK,GAAG3B,MAAM,CAAC,CAAC;EACtB,MAAM4B,KAAK,GAAG5B,MAAM,CAAC,CAAC;EACtB,MAAM;IAAE6B,EAAE;IAAEC,IAAI;IAAEC;EAAO,CAAC,GAAG1B,QAAQ,CAAC,CAAC;EACvC,IAAI2B,IAAI,GAAGlB,KAAK,CAACmB,GAAG,CAACC,OAAO;EAC5BnC,SAAS,CAAC,MAAM,KAAK0B,QAAQ,CAACS,OAAO,CAACC,OAAO,CAACL,IAAI,CAACM,KAAK,EAAEN,IAAI,CAACO,MAAM,CAAC,EAAE,CAACP,IAAI,CAAC,CAAC;EAC/E1B,QAAQ,CAAC,MAAM;IACb,MAAM;MAAE6B;IAAI,CAAC,GAAGnB,KAAK;IACrBY,MAAM,CAACQ,OAAO,CAACI,MAAM,GAAGzC,KAAK,CAAC0C,SAAS,CAACC,IAAI,CAACd,MAAM,CAACQ,OAAO,CAACI,MAAM,EAAE,CAACL,GAAG,CAACC,OAAO,GAAGF,IAAI,IAAI,CAAC,EAAE,EAAE,GAAG,CAAC;IACpGJ,KAAK,CAACM,OAAO,CAACO,QAAQ,GAAG5C,KAAK,CAAC0C,SAAS,CAACC,IAAI,CAACZ,KAAK,CAACM,OAAO,CAACO,QAAQ,EAAEC,IAAI,CAACC,GAAG,CAAC,CAACV,GAAG,CAACC,OAAO,GAAGF,IAAI,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC;IAChHL,KAAK,CAACO,OAAO,CAACI,MAAM,GAAGzC,KAAK,CAAC0C,SAAS,CAACC,IAAI,CAACb,KAAK,CAACO,OAAO,CAACI,MAAM,EAAEI,IAAI,CAACC,GAAG,CAAC,CAACV,GAAG,CAACC,OAAO,GAAGF,IAAI,IAAI,EAAE,CAAC,EAAE,GAAG,CAAC;IAC3GA,IAAI,GAAGC,GAAG,CAACC,OAAO;IAClBL,EAAE,CAACe,SAAS,GAAG,IAAI;IACnBnB,QAAQ,CAACS,OAAO,CAACW,MAAM,CAAC,CAAC;EAC3B,CAAC,EAAE,CAAC,CAAC;EACL,OAAOvC,YAAY,eACjBU,OAAA,CAAAE,SAAA;IAAAI,QAAA,gBACEN,OAAA;MAAgB8B,GAAG,EAAErB,QAAS;MAACsB,IAAI,EAAE,CAAClB,EAAE,CAAE;MAAAP,QAAA,gBACxCN,OAAA;QAAYgC,WAAW,EAAC,QAAQ;QAACzB,KAAK,EAAEA,KAAM;QAACQ,MAAM,EAAEA;MAAO;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACjEpC,OAAA;QAAiBgC,WAAW,EAAC,QAAQ;QAACF,GAAG,EAAElB,KAAM;QAACmB,IAAI,EAAE,CAACM,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG;MAAE;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACpFpC,OAAA;QAAYgC,WAAW,EAAC,QAAQ;QAACF,GAAG,EAAEpB;MAAO;QAAAuB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAChDpC,OAAA;QAAWgC,WAAW,EAAC,QAAQ;QAACF,GAAG,EAAEnB;MAAM;QAAAsB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChC,CAAC,EAChB9B,QAAQ;EAAA,eACT,CAAC,EACHC,KACF,CAAC;AACH;AAACF,EAAA,CA9BuBF,OAAO;EAAA,QAMAd,QAAQ,EAGrCD,QAAQ;AAAA;AAAAkD,EAAA,GATcnC,OAAO;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}